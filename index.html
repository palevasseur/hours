<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

    <title>Heures</title>

    <script src="./bower_components/webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="./bower_components/paper-header-panel/paper-header-panel.html">
    <link rel="import" href="./bower_components/paper-toolbar/paper-toolbar.html">
    <link rel="import" href="./bower_components/iron-flex-layout/iron-flex-layout.html">

    <link rel="import" href="./elements/hours-card.html">
    <link rel="import" href="./elements/hours-date.html">

    <!--
     - manage (+) to add hour:
        - propose = current month/year, last day not enterred.
        - if current month, propose current day
        - disable possibility to select month (month = the one selected in combobox)
        - disable day already enterred
     - add "highlight color" waiting DB callback
     - error message, on cnx failed
     - add drop down service + login OR url init (...?services=Garde:sabrina-garde,Ménage:sabrina-menage), if only 1 service don't add drop down
     ---
     - dynamic modal dialog
     - use better time picker (https://customelements.io/SoldovskijBB/paper-time-picker/ OR http://dotlouis.github.io/md-timepicker/components/md-timepicker/index.html
     - diff time < 0 => display "erreur"
     - new date => init with "contract time" (ex: 15h45 - 18h30)
     - review/better management for local/gmt (current issue with calc around 00h00)
     - check 'to do', check unseless dependency (remove iron-icon)
    -->

    <style is="custom-style">
        paper-header-panel {
            height: 100%;
        }
        .content {
        }
        paper-toolbar {
            background-color: rgba(127, 226, 159, 0.24);
        }

    </style>
</head>

<body class="fullbleed">
    <paper-header-panel mode="standard" class="vertical layout fit">

        <paper-toolbar>
            <hours-date id="idCurrentDate"></hours-date>
        </paper-toolbar>

        <div class="content fit">
            <hours-card id="idGarde" name="Garde" service="garde" class="card"></hours-card>
            <hours-card id="idMenage" name="Ménage" service="menage" class="card"></hours-card>
        </div>
    </paper-header-panel>

    <script>
        // todo: with binding (create an app component and use {{currentMonth}} and {{currentYear}})
        idCurrentDate.addEventListener("month-changed", function(e){
            console.log('event month-changed', e.detail.value);
            idGarde.month = e.detail.value;
            idMenage.month = e.detail.value;
        });
        idCurrentDate.addEventListener("year-changed", function(e){
            console.log('event year-changed', e.detail.value);
            idGarde.year = e.detail.value;
            idMenage.year = e.detail.value;
        });
    </script>
</body>
</html>