<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">

<dom-module id="hours-date">

    <template>
        <style>

        </style>

        <paper-dropdown-menu label="Mois" style="width: 140px">
            <paper-listbox id="idMonth" class="dropdown-content" on-iron-select="monthChanged">
                <paper-item value="01">Janvier (01)</paper-item>
                <paper-item value="02">Février (02)</paper-item>
                <paper-item value="03">Mars (03)</paper-item>
                <paper-item value="04">Avril (04)</paper-item>
                <paper-item value="05">Mai (05)</paper-item>
                <paper-item value="06">Juin (06)</paper-item>
                <paper-item value="07">Juillet (07)</paper-item>
                <paper-item value="08">Août (08)</paper-item>
                <paper-item value="09">Septembre (09)</paper-item>
                <paper-item value="10">Octobre (10)</paper-item>
                <paper-item value="11">Novembre (11)</paper-item>
                <paper-item value="12">Décembre (12)</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>
        <paper-dropdown-menu label="Années" style="width: 70px">
            <paper-listbox id="idYear" class="dropdown-content" on-iron-select="yearChanged">
                <paper-item value="2016">2016</paper-item>
                <paper-item value="2017">2017</paper-item>
                <paper-item value="2018">2018</paper-item>
                <paper-item value="2019">2019</paper-item>
                <paper-item value="2020">2020</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>


    </template>

    <script>
        Polymer({
            is: 'hours-date',
            ready: function () {
                var nowYearMonth = (new Date()).toJSON().split('T')[0].split('-');
                var nowYear = nowYearMonth[0];
                var nowMonth = nowYearMonth[1];

                this.$.idYear.selectIndex(nowYear-2016); // todo: search value==yearMonth[0] in listbox
                this.$.idMonth.selectIndex(nowMonth-1); // todo: search value==yearMonth[1] in listbox
            },
            properties: {
                month: {
                    type: String,
                    notify: true
                },
                year: {
                    type: String,
                    notify: true
                }
            },
            monthChanged: function (event) {
                // todo: use calculated month parameter
                this.month = this.$.idMonth.selectedItem.getAttribute("value");
            },
            yearChanged: function (event) {
                // todo: use calculated year parameter
                this.year = this.$.idYear.selectedItem.getAttribute("value");
            }
        });
    </script>

</dom-module>